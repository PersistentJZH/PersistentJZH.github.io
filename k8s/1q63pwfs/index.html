<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.24" /><meta name="theme" content="VuePress Theme Plume 1.0.0-rc.157" /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"ğŸ“¦CalicoåŸç†åˆ†æ","image":[""],"dateModified":"2025-08-13T15:11:46.000Z","author":[]}</script><meta property="og:url" content="https://blog.jianzhihao.icu/k8s/1q63pwfs/"><meta property="og:site_name" content="ZH Blog"><meta property="og:title" content="ğŸ“¦CalicoåŸç†åˆ†æ"><meta property="og:description" content="kind create cluster --name calico-cluster --config - <<EOF kind: Cluster apiVersion: kind.x-k8s.io/v1alpha4 nodes: role: control-plane role: worker role: worker networking: disa..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-08-13T15:11:46.000Z"><meta property="article:modified_time" content="2025-08-13T15:11:46.000Z"><link rel="icon" type="image/png" href="https://theme-plume.vuejs.press/favicon-32x32.png"><title>ğŸ“¦CalicoåŸç†åˆ†æ | ZH Blog</title><meta name="description" content="kind create cluster --name calico-cluster --config - <<EOF kind: Cluster apiVersion: kind.x-k8s.io/v1alpha4 nodes: role: control-plane role: worker role: worker networking: disa..."><link rel="preload" href="/assets/style-D3gcUh-r.css" as="style"><link rel="stylesheet" href="/assets/style-D3gcUh-r.css"><link rel="modulepreload" href="/assets/app-Bx6_S8_t.js"><link rel="modulepreload" href="/assets/index.html-BWGrbpYG.js"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-d90a7a26><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-d5a8d0bc></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-d5a8d0bc> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-d90a7a26 data-v-e98a6132><div class="vp-navbar" vp-navbar data-v-e98a6132 data-v-2c31ea5e><div class="wrapper" data-v-2c31ea5e><div class="container" data-v-2c31ea5e><div class="title" data-v-2c31ea5e><div class="vp-navbar-title has-sidebar" data-v-2c31ea5e data-v-1a4f50af><a class="vp-link link no-icon title" href="/" data-v-1a4f50af><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" style="" src="https://theme-plume.vuejs.press/plume.png" alt data-v-480e858a><!--]--><!--[--><img class="vp-image light logo" style="" src="https://theme-plume.vuejs.press/plume.png" alt data-v-480e858a><!--]--><!--]--><!--]--><span data-v-1a4f50af>ZH Blog</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-2c31ea5e><div class="content-body" data-v-2c31ea5e><!--[--><!--]--><div class="vp-navbar-search search" data-v-2c31ea5e><div class="search-wrapper" data-v-97535d1e><!----><div id="local-search" data-v-97535d1e><button type="button" class="mini-search mini-search-button" aria-label="æœç´¢æ–‡æ¡£" data-v-97535d1e><span class="mini-search-button-container"><span class="mini-search-search-icon vpi-mini-search" aria-label="search icon"></span><span class="mini-search-button-placeholder">æœç´¢æ–‡æ¡£</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><!--[--><!--]--><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-2c31ea5e data-v-d43c1732><span id="main-nav-aria-label" class="visually-hidden" data-v-d43c1732>Main Navigation</span><!--[--><!--[--><a class="vp-link link navbar-menu-link" href="/" tabindex="0" data-v-d43c1732 data-v-d4acf911><!--[--><!----><span data-v-d4acf911>ğŸ¡é¦–é¡µ</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/" tabindex="0" data-v-d43c1732 data-v-d4acf911><!--[--><!----><span data-v-d4acf911>ğŸ“åšå®¢</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/tags/" tabindex="0" data-v-d43c1732 data-v-d4acf911><!--[--><!----><span data-v-d4acf911>ğŸ”–æ ‡ç­¾</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/archives/" tabindex="0" data-v-d43c1732 data-v-d4acf911><!--[--><!----><span data-v-d4acf911>ğŸ—ƒï¸å½’æ¡£</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/categories/" tabindex="0" data-v-d43c1732 data-v-d4acf911><!--[--><!----><span data-v-d4acf911>ğŸ•¹ï¸åˆ†ç±»</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/notes/" tabindex="0" data-v-d43c1732 data-v-d4acf911><!--[--><!----><span data-v-d4acf911>ğŸ“šç¬”è®°</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/travel/" tabindex="0" data-v-d43c1732 data-v-d4acf911><!--[--><!----><span data-v-d4acf911>ğŸ–ï¸æ—…è¡Œ</span><!----><!--]--><!----></a><!--]--><!--]--></nav><!--[--><!--]--><div class="vp-flyout vp-navbar-translations translations" data-v-2c31ea5e data-v-0d45479b data-v-86530b6c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="é€‰æ‹©è¯­è¨€" data-v-86530b6c><span class="text" data-v-86530b6c><!----><span class="vpi-languages option-icon" data-v-86530b6c></span><!----><!----><span class="vpi-chevron-down text-icon" data-v-86530b6c></span></span></button><div class="menu" data-v-86530b6c><div class="vp-menu" data-v-86530b6c data-v-709dc2b1><!----><!--[--><!--[--><div class="items" data-v-0d45479b><p class="title" data-v-0d45479b>ç®€ä½“ä¸­æ–‡</p><!--[--><div class="vp-menu-link" data-v-0d45479b data-v-1ff1855f><a class="vp-link link" href="/en/" data-v-1ff1855f><!--[--><!----> English <!----><!--]--><!----></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="vp-navbar-appearance appearance" data-v-2c31ea5e data-v-a295abf6><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-a295abf6 data-v-596c25a9 data-v-7eb32327><span class="check" data-v-7eb32327><span class="icon" data-v-7eb32327><!--[--><span class="vpi-sun sun" data-v-596c25a9></span><span class="vpi-moon moon" data-v-596c25a9></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-2c31ea5e data-v-ad52545c data-v-40bac536><!--[--><a class="vp-social-link no-icon" href="https://github.com/PersistentJZH" aria-label="github" target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><span class="vpi-social-github" /></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-2c31ea5e data-v-652282fd data-v-86530b6c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-86530b6c><span class="vpi-more-horizontal icon" data-v-86530b6c></span></button><div class="menu" data-v-86530b6c><div class="vp-menu" data-v-86530b6c data-v-709dc2b1><!----><!--[--><!--[--><!----><div class="group" data-v-652282fd><div class="item appearance" data-v-652282fd><p class="label" data-v-652282fd>å¤–è§‚</p><div class="appearance-action" data-v-652282fd><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-652282fd data-v-596c25a9 data-v-7eb32327><span class="check" data-v-7eb32327><span class="icon" data-v-7eb32327><!--[--><span class="vpi-sun sun" data-v-596c25a9></span><span class="vpi-moon moon" data-v-596c25a9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-652282fd><div class="item social-links" data-v-652282fd><div class="vp-social-links social-links-list" data-v-652282fd data-v-40bac536><!--[--><a class="vp-social-link no-icon" href="https://github.com/PersistentJZH" aria-label="github" target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-2c31ea5e data-v-2b50024d><span class="container" data-v-2b50024d><span class="top" data-v-2b50024d></span><span class="middle" data-v-2b50024d></span><span class="bottom" data-v-2b50024d></span></span></button></div></div></div></div><div class="divider" data-v-2c31ea5e><div class="divider-line" data-v-2c31ea5e></div></div></div><!----></header><div class="vp-local-nav reached-top" data-v-d90a7a26 data-v-3944d8e8><button class="menu" aria-expanded="false" aria-controls="SidebarNav" data-v-3944d8e8><span class="vpi-align-left menu-icon" data-v-3944d8e8></span><span class="menu-text" data-v-3944d8e8>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-3944d8e8 data-v-4114a62c><button data-v-4114a62c>è¿”å›é¡¶éƒ¨</button><!----></div></div><aside class="vp-sidebar" vp-sidebar data-v-d90a7a26 data-v-95211354><div class="curtain" data-v-95211354></div><nav id="SidebarNav" class="nav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-95211354><span id="sidebar-aria-label" class="visually-hidden" data-v-95211354> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f> åŸºç¡€</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/rwl9lg2c/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>kind å¸¸ç”¨å‘½ä»¤è¯¦è§£</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/hreo17tb/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>serviceåŸç†</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/se02n0mk/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Kubernetes Webhook è¯¦è§£ä¸å®è·µ</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/3ul73e1l/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Helm ä½¿ç”¨æŒ‡å—</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/m5e88tbo/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Kubernetes Jobå’ŒCronJobè¯¦è§£</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/atnvxy1k/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>pvc</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/ildksm1z/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Kubernetes CLI-Runtime è¯¦è§£</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/4iyz7vyg/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>â›³ï¸docker</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/1ygxqk6d/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>ğŸ„â€â™‚ï¸ HPA</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/zqfais6m/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>â›µï¸kubelet</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/l9h2s052/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>ğŸ«£operator</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible has-active" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f> ç½‘ç»œ</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><section class="vp-sidebar-item sidebar-item level-1 collapsible" data-v-12048f0f data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h3 class="text" data-v-12048f0f><span data-v-12048f0f>ç½‘ç»œæ’ä»¶åŸºç¡€</span><!----></h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-2 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/tvrhac3r/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>kubeletä¸cni</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-2 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/34fs59t4/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>ğŸ¥…cni</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section><section class="vp-sidebar-item sidebar-item level-1 collapsible has-active" data-v-12048f0f data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h3 class="text" data-v-12048f0f><span data-v-12048f0f>Calico</span><!----></h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-2 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/eigpt0xy/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>ğŸ¦â€ğŸ”¥Birdçš„ä½¿ç”¨</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-2 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/ayl6l9u6/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>ğŸ±Calicoæ¶æ„å’Œä½¿ç”¨</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-2 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/1q63pwfs/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>ğŸ“¦CalicoåŸç†åˆ†æ</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-2 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/5ueb9pny/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>ip poolçš„ä½¿ç”¨</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-2 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/yg88mc7r/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>ğŸ§€Serviceè·¯ç”±å®£å‘Š</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section><section class="vp-sidebar-item sidebar-item level-1 collapsible" data-v-12048f0f data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h3 class="text" data-v-12048f0f><span data-v-12048f0f>flannel</span><!----></h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-2 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/l1e57s3y/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>ğŸƒflannel</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section><!--]--></div></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f> æºç åˆ†æ</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/l75zjmj1/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>â›µï¸apiserveræºç </span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/x4d7orno/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>ğŸ’ªcontroller-manageræºç </span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/slfkzgfd/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>ğŸ›¶kubeletæºç </span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f> k8så¢å¼º</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><section class="vp-sidebar-item sidebar-item level-1 collapsible" data-v-12048f0f data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h3 class="text" data-v-12048f0f><span data-v-12048f0f>kruise-rollout</span><!----></h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-2 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/egsg3eyn/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>å‘å¸ƒç±»å‹</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section><section class="vp-sidebar-item sidebar-item level-1 collapsible" data-v-12048f0f data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h3 class="text" data-v-12048f0f><span data-v-12048f0f>openkruise</span><!----></h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-2 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/7gptvl9g/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>cloneSet</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-2 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/er3d3vot/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>åŸåœ°å‡çº§</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section><!--]--></div></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f>github_pr</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/kz69s4r4/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>calico_1</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f>spire</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/7dl60axt/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>reconcile</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/k8s/k90axrjc/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>spireåŸºç¡€</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><!--]--><!--[--><!--]--></nav></aside><!--[--><div id="VPContent" vp-content class="vp-content has-sidebar" data-v-d90a7a26 data-v-b2beaca7><div class="vp-doc-container has-sidebar has-aside" data-v-b2beaca7 data-v-23f6ad98><!--[--><!--]--><div class="container" data-v-23f6ad98><div class="aside" vp-outline data-v-23f6ad98><div class="aside-curtain" data-v-23f6ad98></div><div class="aside-container" data-v-23f6ad98><div class="aside-content" data-v-23f6ad98><div class="vp-doc-aside" data-v-23f6ad98 data-v-5976474c><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="vp-doc-aside-outline" role="navigation" data-v-5976474c data-v-aa56eba0><div class="content" data-v-aa56eba0><div class="outline-marker" data-v-aa56eba0></div><div id="doc-outline-aria-label" aria-level="2" class="outline-title" role="heading" data-v-aa56eba0><span data-v-aa56eba0>æ­¤é¡µå†…å®¹</span><span class="vpi-print icon" data-v-aa56eba0></span></div><ul class="root" data-v-aa56eba0 data-v-3e6b023c><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-5976474c></div><!--[--><!--]--></div></div></div></div><div class="content" data-v-23f6ad98><div class="content-container" data-v-23f6ad98><!--[--><!--]--><main class="main" data-v-23f6ad98><nav class="vp-breadcrumb" data-v-23f6ad98 data-v-1ae4ad7a><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-1ae4ad7a><!--[--><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link link breadcrumb" href="/" property="item" typeof="WebPage" data-v-1ae4ad7a><!--[-->é¦–é¡µ<!--]--><!----></a><span class="vpi-chevron-right" data-v-1ae4ad7a></span><meta property="name" content="é¦–é¡µ" data-v-1ae4ad7a><meta property="position" content="1" data-v-1ae4ad7a></li><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><span class="vp-link breadcrumb" property="item" typeof="WebPage" data-v-1ae4ad7a><!--[--> ç½‘ç»œ<!--]--><!----></span><span class="vpi-chevron-right" data-v-1ae4ad7a></span><meta property="name" content=" ç½‘ç»œ" data-v-1ae4ad7a><meta property="position" content="2" data-v-1ae4ad7a></li><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><span class="vp-link breadcrumb" property="item" typeof="WebPage" data-v-1ae4ad7a><!--[-->Calico<!--]--><!----></span><span class="vpi-chevron-right" data-v-1ae4ad7a></span><meta property="name" content="Calico" data-v-1ae4ad7a><meta property="position" content="3" data-v-1ae4ad7a></li><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link link breadcrumb current" href="/k8s/1q63pwfs/" property="item" typeof="WebPage" data-v-1ae4ad7a><!--[-->ğŸ“¦CalicoåŸç†åˆ†æ<!--]--><!----></a><!----><meta property="name" content="ğŸ“¦CalicoåŸç†åˆ†æ" data-v-1ae4ad7a><meta property="position" content="4" data-v-1ae4ad7a></li><!--]--></ol></nav><!--[--><!--]--><!--[--><h1 class="vp-doc-title page-title" data-v-27be53cb>ğŸ“¦CalicoåŸç†åˆ†æ <!----></h1><div class="vp-doc-meta" data-v-27be53cb><!--[--><!--]--><p class="reading-time" data-v-27be53cb><span class="vpi-books icon" data-v-27be53cb></span><span data-v-27be53cb>çº¦ 1853 å­—</span><span data-v-27be53cb>å¤§çº¦ 6 åˆ†é’Ÿ</span></p><!----><!--[--><!--]--><p class="create-time" data-v-27be53cb><span class="vpi-clock icon" data-v-27be53cb></span><span data-v-27be53cb>2025-08-12</span></p></div><!--]--><!--[--><!--]--><div class="_k8s_1q63pwfs_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-23f6ad98><!--[--><!--]--><div data-v-23f6ad98><p>kind create cluster --name calico-cluster --config - &lt;&lt;EOF kind: Cluster apiVersion: kind.x-k8s.io/v1alpha4 nodes:</p><ul><li>role: control-plane</li><li>role: worker</li><li>role: worker networking: disableDefaultCNI: true podSubnet: 192.167.0.0/16 EOF</li></ul><p>kubectl create -f https://raw.githubusercontent.com/projectcalico/calico/v3.30.2/manifests/tigera-operator.yaml</p><p>kubectl create -f https://raw.githubusercontent.com/projectcalico/calico/v3.30.2/manifests/custom-resources.yaml</p><h2 id="cat-eof-calicoctl-apply-f" tabindex="-1"><a class="header-anchor" href="#cat-eof-calicoctl-apply-f"><span>cat &lt;&lt;EOF | calicoctl apply -f -</span></a></h2><p>apiVersion: projectcalico.org/v3 kind: IPPool metadata: name: external-pool spec: cidr: 192.168.64.0/24 blockSize: 29 ipipMode: Never natOutgoing: true nodeSelector: &quot;!all()&quot; EOF</p><p>multipass set local.bridged-network.range=10.168.64.0/24</p><h2 id="cat-eof-calicoctl-apply-f-1" tabindex="-1"><a class="header-anchor" href="#cat-eof-calicoctl-apply-f-1"><span>cat &lt;&lt;EOF | calicoctl apply -f -</span></a></h2><p>apiVersion: projectcalico.org/v3 kind: BGPPeer metadata: name: bgppeer-global-host1 spec: peerIP: 192.168.64.5 asNumber: 64512 EOF</p><p>sudo bash -c &quot;cat &gt; /etc/bird/bird.conf &lt;&lt;EOF router id 192.168.64.6;</p><p>protocol kernel { scan time 60; import none; export all; }</p><p>protocol device { scan time 60; }</p><p>protocol bgp k8s_calico { local as 64512; neighbor 172.18.0.3 as 64511; # å°†æŒ‡å‘KindèŠ‚ç‚¹çš„IP import all; export none; multihop; } EOF&quot;</p><p>kubectl apply -f - &lt;&lt;EOF apiVersion: projectcalico.org/v3 kind: BGPPeer metadata: name: multipass-peer spec: peerIP: 192.168.64.6 asNumber: 64512 nodeSelector: all() EOF</p><h3 id="_1-èŠ‚ç‚¹åŠ å…¥é›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#_1-èŠ‚ç‚¹åŠ å…¥é›†ç¾¤"><span><strong>1. èŠ‚ç‚¹åŠ å…¥é›†ç¾¤</strong></span></a></h3><p>å½“æ–°èŠ‚ç‚¹åŠ å…¥ Kubernetes é›†ç¾¤æ—¶ï¼ŒCalico ä¼šè§¦å‘è·¯ç”±å®£å‘Šï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p><ol><li><strong>èŠ‚ç‚¹æ³¨å†Œ</strong>ï¼š <ul><li>æ–°èŠ‚ç‚¹é€šè¿‡ <code>kubelet</code> æ³¨å†Œåˆ° Kubernetes API Serverã€‚</li><li>Calico çš„ <code>CNI æ’ä»¶</code> ä¸ºè¯¥èŠ‚ç‚¹åˆ†é… Pod CIDRï¼ˆå¦‚ <code>10.244.3.0/24</code>ï¼‰ã€‚</li></ul></li><li><strong>Felix æ£€æµ‹å˜åŒ–</strong>ï¼š <ul><li>Felix ç›‘å¬ Kubernetes APIï¼Œå‘ç°æ–°èŠ‚ç‚¹åŠåˆ†é…çš„ Pod CIDRã€‚</li><li>Felix åœ¨æœ¬åœ°é…ç½®è·¯ç”±è¡¨ï¼Œç¡®ä¿æœ¬æœº Pod å¯è®¿é—®æ–°èŠ‚ç‚¹çš„ Pod CIDRã€‚</li></ul></li><li><strong>BIRD è§¦å‘ BGP å®£å‘Š</strong>ï¼š <ul><li>BIRD æ£€æµ‹åˆ°æ–°è·¯ç”±ï¼ˆå¦‚ <code>10.244.3.0/24</code> å±äºæ–°èŠ‚ç‚¹ï¼‰ï¼Œé€šè¿‡ BGP åè®®å‘æ‰€æœ‰å¯¹ç­‰ä½“ï¼ˆå…¶ä»–èŠ‚ç‚¹ï¼‰å®£å‘Šè¯¥è·¯ç”±ã€‚</li><li>å…¶ä»–èŠ‚ç‚¹é€šè¿‡ BGP å­¦ä¹ åˆ°æ–°è·¯ç”±ï¼Œæ›´æ–°å†…æ ¸è·¯ç”±è¡¨ã€‚</li></ul></li></ol><p><strong>å…³é”®æ—¥å¿—</strong>ï¼ˆé€šè¿‡ <code>journalctl -u bird</code> æŸ¥çœ‹ï¼‰ï¼š</p><div class="language-" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>BGP: Sending UPDATE to neighbor 192.168.100.3: Added 10.244.3.0/24</span></span></code></pre></div><hr><h3 id="_2-èŠ‚ç‚¹ç¦»å¼€æˆ–æ•…éšœ" tabindex="-1"><a class="header-anchor" href="#_2-èŠ‚ç‚¹ç¦»å¼€æˆ–æ•…éšœ"><span><strong>2. èŠ‚ç‚¹ç¦»å¼€æˆ–æ•…éšœ</strong></span></a></h3><ol><li><strong>èŠ‚ç‚¹å¤±è”</strong>ï¼š <ul><li>BGP ä¼šè¯å› èŠ‚ç‚¹å®•æœºæˆ–ç½‘ç»œä¸­æ–­è€Œæ–­å¼€ï¼ˆé»˜è®¤ Keepalive è¶…æ—¶ä¸º 90 ç§’ï¼‰ã€‚</li></ul></li><li><strong>è·¯ç”±æ’¤å›</strong>ï¼š <ul><li>BIRD æ£€æµ‹åˆ°å¯¹ç­‰ä½“å¤±æ•ˆï¼Œè‡ªåŠ¨è§¦å‘ <code>WITHDRAW</code> æ¶ˆæ¯ï¼Œé€šçŸ¥å…¶ä»–èŠ‚ç‚¹æ’¤é”€è¯¥èŠ‚ç‚¹çš„è·¯ç”±ï¼ˆå¦‚ <code>10.244.3.0/24</code>ï¼‰ã€‚</li></ul></li><li><strong>é›†ç¾¤æ”¶æ•›</strong>ï¼š <ul><li>å…¶ä»–èŠ‚ç‚¹åˆ é™¤å¤±æ•ˆè·¯ç”±ï¼Œæµé‡ä¸å†è½¬å‘è‡³æ•…éšœèŠ‚ç‚¹ã€‚</li></ul></li></ol><p><strong>å½±å“</strong>ï¼š</p><ul><li>è‹¥æ•…éšœèŠ‚ç‚¹æ¢å¤ï¼ŒBGP ä¼šè¯é‡æ–°å»ºç«‹ï¼Œè·¯ç”±ä¼šé‡æ–°å®£å‘Šã€‚</li></ul><hr><h3 id="_3-pod-åˆ›å»ºæˆ–åˆ é™¤" tabindex="-1"><a class="header-anchor" href="#_3-pod-åˆ›å»ºæˆ–åˆ é™¤"><span><strong>3. Pod åˆ›å»ºæˆ–åˆ é™¤</strong></span></a></h3><ol><li><strong>Pod åˆ›å»º</strong>ï¼š <ul><li>Calico çš„ <code>IPAM</code> ä» Pod CIDR ä¸­åˆ†é… IPï¼ˆå¦‚ <code>10.244.1.5</code>ï¼‰ã€‚</li><li>Felix åœ¨ä¸»æœºæ·»åŠ è¯¥ Pod çš„ç›´è¿è·¯ç”±ï¼ˆæ— éœ€ BGP å®£å‘Šï¼Œå› ä¸ºå±äºæœ¬åœ° CIDRï¼‰ã€‚</li></ul></li><li><strong>Pod è·¨èŠ‚ç‚¹é€šä¿¡</strong>ï¼š <ul><li>åªæœ‰ <strong>Pod CIDR çš„å­ç½‘</strong>ï¼ˆå¦‚ <code>10.244.1.0/24</code>ï¼‰ä¼šé€šè¿‡ BGP å®£å‘Šï¼Œå•ä¸ª Pod IP ä¸ä¼šå•ç‹¬å¹¿æ’­ã€‚</li><li>å…¶ä»–èŠ‚ç‚¹é€šè¿‡å·²å­¦ä¹ çš„ Pod CIDR è·¯ç”±ï¼Œç»“åˆä¸»æœºçš„ ARP è§£æï¼Œå®šä½å…·ä½“ Podã€‚</li></ul></li></ol><p><strong>ä¾‹å¤–</strong>ï¼š</p><ul><li>è‹¥å¯ç”¨ <code>host-local</code> IPAM ä¸” Pod CIDR è€—å°½ï¼Œå¯èƒ½è§¦å‘æ–°èŠ‚ç‚¹åŠ å…¥ä»¥æ‰©å±•åœ°å€æ± ã€‚</li></ul><hr><h3 id="_4-ç½‘ç»œç­–ç•¥å˜æ›´" tabindex="-1"><a class="header-anchor" href="#_4-ç½‘ç»œç­–ç•¥å˜æ›´"><span><strong>4. ç½‘ç»œç­–ç•¥å˜æ›´</strong></span></a></h3><ol><li><strong>ç­–ç•¥æ›´æ–°</strong>ï¼š <ul><li>ä¿®æ”¹ <code>NetworkPolicy</code> å¯èƒ½å¯¼è‡´ Felix é‡æ–°ç”Ÿæˆ iptables/eBPF è§„åˆ™ã€‚</li></ul></li><li><strong>è·¯ç”±ç­–ç•¥è°ƒæ•´</strong>ï¼š <ul><li>è‹¥ç­–ç•¥å½±å“è·¯ç”±ï¼ˆå¦‚ç¦æ­¢æŸäº›å­ç½‘é€šä¿¡ï¼‰ï¼ŒBIRD å¯èƒ½è§¦å‘è·¯ç”±è¿‡æ»¤æˆ–é‡æ–°å®£å‘Šã€‚</li><li>ä¾‹å¦‚ï¼šé€šè¿‡ <code>export filter</code> é™åˆ¶é€šå‘Šçš„è·¯ç”±èŒƒå›´ã€‚</li></ul></li></ol><hr><h3 id="_5-æ‰‹åŠ¨å¹²é¢„" tabindex="-1"><a class="header-anchor" href="#_5-æ‰‹åŠ¨å¹²é¢„"><span><strong>5. æ‰‹åŠ¨å¹²é¢„</strong></span></a></h3><ol><li><strong>å¼ºåˆ¶è·¯ç”±åˆ·æ–°</strong>ï¼š<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">birdc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reload</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # é‡æ–°åŠ è½½ BIRD é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">birdc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> disable</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bgp_peer</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # ä¸´æ—¶ç¦ç”¨å¯¹ç­‰ä½“ï¼Œå†å¯ç”¨ä»¥è§¦å‘è·¯ç”±æ›´æ–°</span></span></code></pre></div></li><li><strong>Calico é…ç½®å˜æ›´</strong>ï¼š <ul><li>ä¿®æ”¹ <code>BGPConfiguration</code>ï¼ˆå¦‚è°ƒæ•´ AS å·ã€å¯ç”¨ RR æ¨¡å¼ï¼‰ä¼šè§¦å‘å…¨é›†ç¾¤è·¯ç”±é‡æ–°åŒæ­¥ã€‚</li></ul></li></ol><hr><h3 id="_6-å…¶ä»–åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#_6-å…¶ä»–åœºæ™¯"><span><strong>6. å…¶ä»–åœºæ™¯</strong></span></a></h3><table><thead><tr><th><strong>åœºæ™¯</strong></th><th><strong>è§¦å‘æ¡ä»¶</strong></th><th><strong>è·¯ç”±å®£å‘Šè¡Œä¸º</strong></th></tr></thead><tbody><tr><td><strong>é›†ç¾¤æ‰©å®¹</strong></td><td>æ–°å¢å¤šä¸ªèŠ‚ç‚¹</td><td>æ¯ä¸ªæ–°èŠ‚ç‚¹çš„ Pod CIDR è¢«ç‹¬ç«‹å®£å‘Š</td></tr><tr><td><strong>èŠ‚ç‚¹ IP å˜æ›´</strong></td><td>ä¸»æœº IP æ›´æ–°ï¼ˆå¦‚ DHCP ç»­çº¦ï¼‰</td><td>BGP ä¼šè¯é‡å»ºï¼Œè·¯ç”±é‡æ–°å®£å‘Š</td></tr><tr><td><strong>BGP å¯¹ç­‰ä½“é…ç½®å˜æ›´</strong></td><td>æ–°å¢/åˆ é™¤ BGP é‚»å±…ï¼ˆå¦‚ Spine-Leaf æ¶æ„ï¼‰</td><td>åŠ¨æ€è°ƒæ•´è·¯ç”±ä¼ æ’­èŒƒå›´</td></tr><tr><td><strong>IP æ± ä¿®æ”¹</strong></td><td>è°ƒæ•´ <code>IPPool</code> çš„ CIDR</td><td>æ‰€æœ‰å—å½±å“èŠ‚ç‚¹é‡æ–°å®£å‘Šè·¯ç”±</td></tr></tbody></table><hr><h3 id="åº•å±‚åŸç†-bgp-åè®®è§†è§’" tabindex="-1"><a class="header-anchor" href="#åº•å±‚åŸç†-bgp-åè®®è§†è§’"><span><strong>åº•å±‚åŸç†ï¼ˆBGP åè®®è§†è§’ï¼‰</strong></span></a></h3><ol><li><strong>è·¯ç”±æ›´æ–°æ¡ä»¶</strong>ï¼š <ul><li>å½“ BGP Speakerï¼ˆå¦‚ BIRDï¼‰æ£€æµ‹åˆ°æœ¬åœ°è·¯ç”±è¡¨å˜åŒ–æ—¶ï¼ˆæ–°å¢/åˆ é™¤è·¯ç”±ï¼‰ï¼Œä¼šå‘å¯¹ç­‰ä½“å‘é€ <code>UPDATE</code> æ¶ˆæ¯ã€‚</li></ul></li><li><strong>æ”¶æ•›æœºåˆ¶</strong>ï¼š <ul><li>é»˜è®¤é‡‡ç”¨ <code>Full-Mesh</code> æ¨¡å¼ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç›´æ¥äº¤æ¢è·¯ç”±ã€‚</li><li>åœ¨å¤§è§„æ¨¡é›†ç¾¤ä¸­ï¼Œå¯é€šè¿‡ <code>Route Reflector (RR)</code> ä¼˜åŒ–ï¼Œå‡å°‘ BGP è¿æ¥æ•°ã€‚</li></ul></li></ol><hr><h3 id="éªŒè¯è·¯ç”±å®£å‘Š" tabindex="-1"><a class="header-anchor" href="#éªŒè¯è·¯ç”±å®£å‘Š"><span><strong>éªŒè¯è·¯ç”±å®£å‘Š</strong></span></a></h3><ol><li><strong>æŸ¥çœ‹ BGP é‚»å±…çŠ¶æ€</strong>ï¼š<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">calicoctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> node</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> status</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># æˆ–</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">birdc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> show</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> protocols</span></span></code></pre></div></li><li><strong>æ£€æŸ¥è·¯ç”±è¡¨</strong>ï¼š<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ip</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> route</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # æŸ¥çœ‹å†…æ ¸è·¯ç”±è¡¨</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">birdc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> show</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> route</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # æŸ¥çœ‹ BIRD å­¦ä¹ åˆ°çš„è·¯ç”±</span></span></code></pre></div></li><li><strong>æŠ“åŒ…åˆ†æ</strong>ï¼š<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">tcpdump</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eth0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">tcp port 179</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # æ•è· BGP åè®®æµé‡</span></span></code></pre></div></li></ol><hr><h3 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“"><span><strong>æ€»ç»“</strong></span></a></h3><p>Calico çš„è·¯ç”±å®£å‘Šä¸»è¦ç”±ä»¥ä¸‹äº‹ä»¶è§¦å‘ï¼š</p><ol><li><strong>èŠ‚ç‚¹ç”Ÿå‘½å‘¨æœŸå˜åŒ–</strong>ï¼ˆåŠ å…¥/ç¦»å¼€ï¼‰ã€‚</li><li><strong>Pod CIDR åˆ†é…æˆ–å›æ”¶</strong>ã€‚</li><li><strong>BGP ä¼šè¯çŠ¶æ€å˜æ›´</strong>ï¼ˆå¦‚å¯¹ç­‰ä½“æ–­å¼€ï¼‰ã€‚</li><li><strong>ç­–ç•¥æˆ–é…ç½®æ›´æ–°</strong>ã€‚</li></ol><p>è¿™ç§è®¾è®¡ç¡®ä¿äº†é›†ç¾¤ç½‘ç»œçš„ <strong>é«˜å¯ç”¨æ€§</strong> å’Œ <strong>å¿«é€Ÿæ”¶æ•›</strong>ï¼ŒåŒæ—¶é¿å…äº†ä¼ ç»Ÿ SDN æ§åˆ¶å™¨çš„å•ç‚¹ç“¶é¢ˆã€‚</p><p>åœ¨ Calico ä¸­ï¼Œ<strong>è·¯ç”±å®£å‘Šçš„èŒè´£</strong>ä¸»è¦ç”±ä»¥ä¸‹ç»„ä»¶åä½œå®Œæˆï¼Œä¸åŒåœºæ™¯ä¸‹ç”±ä¸åŒç»„ä»¶ä¸»å¯¼ï¼š</p><hr><h3 id="_1-é»˜è®¤åœºæ™¯-pod-ç½‘ç»œè·¯ç”±å®£å‘Š" tabindex="-1"><a class="header-anchor" href="#_1-é»˜è®¤åœºæ™¯-pod-ç½‘ç»œè·¯ç”±å®£å‘Š"><span><strong>1. é»˜è®¤åœºæ™¯ï¼šPod ç½‘ç»œè·¯ç”±å®£å‘Š</strong></span></a></h3><h4 id="å®£å‘Šè€…-bird-bgp-client" tabindex="-1"><a class="header-anchor" href="#å®£å‘Šè€…-bird-bgp-client"><span><strong>å®£å‘Šè€…ï¼šBIRDï¼ˆBGP Clientï¼‰</strong></span></a></h4><ul><li><strong>è§’è‰²</strong>ï¼šCalico åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ¨ç½²çš„è½»é‡çº§ BGP å®¢æˆ·ç«¯ï¼ˆé»˜è®¤ä½¿ç”¨ BIRD æˆ– GoBGPï¼‰ã€‚</li><li><strong>å·¥ä½œæµç¨‹</strong>ï¼š <ol><li><strong>Felix</strong> ç›‘æ§æœ¬æœº Pod å˜åŒ–ï¼Œæ›´æ–°æœ¬åœ°è·¯ç”±è¡¨ï¼ˆå¦‚ <code>10.244.1.0/24 via veth-host</code>ï¼‰ã€‚</li><li><strong>BIRD</strong> æ£€æµ‹åˆ°è·¯ç”±å˜åŒ–åï¼Œé€šè¿‡ BGP åè®®å‘å¯¹ç­‰ä½“ï¼ˆå…¶ä»–èŠ‚ç‚¹æˆ–å¤–éƒ¨è·¯ç”±å™¨ï¼‰å®£å‘Šè¿™äº›è·¯ç”±ã€‚</li><li>å¯¹ç­‰ä½“å­¦ä¹ è·¯ç”±åï¼Œæ›´æ–°è‡ªå·±çš„è·¯ç”±è¡¨ã€‚</li></ol></li><li><strong>å…³é”®é…ç½®</strong>ï¼š<div class="language-yaml" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># æŸ¥çœ‹ Calico çš„ BGP é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">calicoctl get bgpconfiguration</span></span></code></pre></div></li><li><strong>æ—¥å¿—éªŒè¯</strong>ï¼š<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">journalctl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -u</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bird</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> grep</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">UPDATE</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # æŸ¥çœ‹ BIRD å®£å‘Šçš„è·¯ç”±</span></span></code></pre></div></li></ul><hr><h3 id="_2-ç‰¹æ®Šåœºæ™¯-service-cidr-å®£å‘Š-å®éªŒæ€§" tabindex="-1"><a class="header-anchor" href="#_2-ç‰¹æ®Šåœºæ™¯-service-cidr-å®£å‘Š-å®éªŒæ€§"><span><strong>2. ç‰¹æ®Šåœºæ™¯ï¼šService CIDR å®£å‘Šï¼ˆå®éªŒæ€§ï¼‰</strong></span></a></h3><h4 id="å®£å‘Šè€…-calico-node-ä¸Šçš„-bird" tabindex="-1"><a class="header-anchor" href="#å®£å‘Šè€…-calico-node-ä¸Šçš„-bird"><span><strong>å®£å‘Šè€…ï¼šCalico Node ä¸Šçš„ BIRD</strong></span></a></h4><ul><li><strong>è§¦å‘æ¡ä»¶</strong>ï¼šéœ€æ˜¾å¼é…ç½® <code>BGPConfiguration</code> ä¸­çš„ <code>serviceClusterIPs</code>ã€‚</li><li><strong>é…ç½®ç¤ºä¾‹</strong>ï¼š<div class="language-yaml" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">apiVersion</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> projectcalico.org/v3</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">kind</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> BGPConfiguration</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">metadata</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> default</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">spec</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  serviceClusterIPs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> cidr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10.96.0.0/16</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # Kubernetes Service CIDR</span></span></code></pre></div></li><li><strong>è¡Œä¸º</strong>ï¼š <ul><li>Calico ä¼šé€šè¿‡ BIRD å°† <code>10.96.0.0/16</code> ä½œä¸ºèšåˆè·¯ç”±å®£å‘Šå‡ºå»ã€‚</li><li><strong>æ³¨æ„</strong>ï¼šService IP çš„è´Ÿè½½å‡è¡¡ä»ç”± <code>kube-proxy</code> æˆ– <code>eBPF</code> å¤„ç†ï¼ŒBGP ä»…è´Ÿè´£è·¯ç”±å¯è¾¾æ€§ã€‚</li></ul></li></ul><hr><h3 id="_3-é«˜çº§åœºæ™¯-è·¯ç”±åå°„å™¨-route-reflector" tabindex="-1"><a class="header-anchor" href="#_3-é«˜çº§åœºæ™¯-è·¯ç”±åå°„å™¨-route-reflector"><span><strong>3. é«˜çº§åœºæ™¯ï¼šè·¯ç”±åå°„å™¨ï¼ˆRoute Reflectorï¼‰</strong></span></a></h3><h4 id="å®£å‘Šè€…-calico-route-reflector-rr" tabindex="-1"><a class="header-anchor" href="#å®£å‘Šè€…-calico-route-reflector-rr"><span><strong>å®£å‘Šè€…ï¼šCalico Route Reflectorï¼ˆRRï¼‰</strong></span></a></h4><ul><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¤§è§„æ¨¡é›†ç¾¤ä¸­ï¼Œä¸ºé¿å… Full-Mesh BGP è¿æ¥è¿‡å¤šã€‚</li><li><strong>è§’è‰²</strong>ï¼š <ul><li>ä¸“ç”¨èŠ‚ç‚¹ä½œä¸º RRï¼Œé›†ä¸­ç®¡ç†è·¯ç”±å®£å‘Šã€‚</li><li>å…¶ä»–èŠ‚ç‚¹ï¼ˆRR Clientï¼‰ä»…ä¸ RR äº¤æ¢è·¯ç”±ï¼Œä¸ç›´æ¥äº’è¿ã€‚</li></ul></li><li><strong>é…ç½®æ–¹æ³•</strong>ï¼š<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># å°†æŸèŠ‚ç‚¹æ ‡è®°ä¸º Route Reflector</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">calicoctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> patch</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> node</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> node1</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">{&quot;spec&quot;: {&quot;bgp&quot;: {&quot;routeReflectorClusterID&quot;: &quot;224.0.0.1&quot;}}}</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span></code></pre></div></li></ul><hr><h3 id="_4-å¤–éƒ¨ç½‘ç»œé›†æˆ" tabindex="-1"><a class="header-anchor" href="#_4-å¤–éƒ¨ç½‘ç»œé›†æˆ"><span><strong>4. å¤–éƒ¨ç½‘ç»œé›†æˆ</strong></span></a></h3><h4 id="å®£å‘Šè€…-è¾¹ç•ŒèŠ‚ç‚¹-border-node" tabindex="-1"><a class="header-anchor" href="#å®£å‘Šè€…-è¾¹ç•ŒèŠ‚ç‚¹-border-node"><span><strong>å®£å‘Šè€…ï¼šè¾¹ç•ŒèŠ‚ç‚¹ï¼ˆBorder Nodeï¼‰</strong></span></a></h4><ul><li><strong>åœºæ™¯</strong>ï¼šéœ€å°†é›†ç¾¤è·¯ç”±ï¼ˆPod æˆ– Serviceï¼‰å®£å‘Šåˆ°å¤–éƒ¨ç½‘ç»œï¼ˆå¦‚æ•°æ®ä¸­å¿ƒè·¯ç”±å™¨ï¼‰ã€‚</li><li><strong>é…ç½®</strong>ï¼š <ul><li>åœ¨è¾¹ç•ŒèŠ‚ç‚¹ä¸Šé…ç½® BGP å¯¹ç­‰ï¼š</li></ul><div class="language-yaml" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">apiVersion</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> projectcalico.org/v3</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">kind</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> BGPPeer</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">metadata</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> border-router</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">spec</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  peerIP</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 192.168.100.254</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # å¤–éƒ¨è·¯ç”±å™¨ IP</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  asNumber</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 65000</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">          # å¤–éƒ¨ AS å·</span></span></code></pre></div></li></ul><hr><h3 id="ç»„ä»¶åä½œæµç¨‹å›¾" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶åä½œæµç¨‹å›¾"><span><strong>ç»„ä»¶åä½œæµç¨‹å›¾</strong></span></a></h3><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div style="display:flex;align-items:center;justify-content:center;height:96px;" class="mermaid-loading"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);--icon-size: 48px;display: inline-block;width: var(--icon-size);height: var(--icon-size);background-color: currentcolor;-webkit-mask-image: var(--loading-icon);mask-image: var(--loading-icon)"></span></div></div><!--]--><hr><h3 id="å…³é”®æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#å…³é”®æ€»ç»“"><span><strong>å…³é”®æ€»ç»“</strong></span></a></h3><table><thead><tr><th><strong>è·¯ç”±ç±»å‹</strong></th><th><strong>å®£å‘Šè€…</strong></th><th><strong>ä¾èµ–ç»„ä»¶</strong></th><th><strong>é…ç½®æ–¹å¼</strong></th></tr></thead><tbody><tr><td><strong>Pod è·¯ç”±</strong></td><td>BIRDï¼ˆæ¯ä¸ªèŠ‚ç‚¹ï¼‰</td><td>Felix</td><td>è‡ªåŠ¨è§¦å‘ï¼Œæ— éœ€é¢å¤–é…ç½®</td></tr><tr><td><strong>Service è·¯ç”±</strong></td><td>BIRDï¼ˆå®éªŒæ€§ï¼‰</td><td>BGPConfiguration</td><td>éœ€æ˜¾å¼å£°æ˜ <code>serviceClusterIPs</code></td></tr><tr><td><strong>å¤–éƒ¨è·¯ç”±</strong></td><td>è¾¹ç•ŒèŠ‚ç‚¹çš„ BIRD</td><td>BGPPeer</td><td>é…ç½®å¯¹ç­‰ä½“ IP å’Œ AS å·</td></tr><tr><td><strong>èšåˆè·¯ç”±</strong></td><td>Route Reflector</td><td>é›†ç¾¤æ‹“æ‰‘</td><td>æ ‡è®°èŠ‚ç‚¹ä¸º RR</td></tr></tbody></table><hr><h3 id="å¸¸è§é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#å¸¸è§é—®é¢˜"><span><strong>å¸¸è§é—®é¢˜</strong></span></a></h3><h4 id="q1-ä¸ºä»€ä¹ˆæˆ‘çš„-pod-è·¯ç”±æ²¡æœ‰å®£å‘Šå‡ºå»" tabindex="-1"><a class="header-anchor" href="#q1-ä¸ºä»€ä¹ˆæˆ‘çš„-pod-è·¯ç”±æ²¡æœ‰å®£å‘Šå‡ºå»"><span><strong>Q1ï¼šä¸ºä»€ä¹ˆæˆ‘çš„ Pod è·¯ç”±æ²¡æœ‰å®£å‘Šå‡ºå»ï¼Ÿ</strong></span></a></h4><ul><li>æ£€æŸ¥ BGP ä¼šè¯çŠ¶æ€ï¼š<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">calicoctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> node</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> status</span></span></code></pre></div></li><li>ç¡®è®¤ BGP å·²å¯ç”¨ï¼š<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">calicoctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bgpconfig</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -o</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yaml</span></span></code></pre></div></li></ul><h4 id="q2-service-è·¯ç”±å®£å‘Šå¤±è´¥å¦‚ä½•æ’æŸ¥" tabindex="-1"><a class="header-anchor" href="#q2-service-è·¯ç”±å®£å‘Šå¤±è´¥å¦‚ä½•æ’æŸ¥"><span><strong>Q2ï¼šService è·¯ç”±å®£å‘Šå¤±è´¥å¦‚ä½•æ’æŸ¥ï¼Ÿ</strong></span></a></h4><ul><li>éªŒè¯é…ç½®ï¼š<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">calicoctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bgpconfiguration</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -o</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yaml</span></span></code></pre></div></li><li>æ£€æŸ¥ BIRD æ—¥å¿—ï¼š<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">journalctl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -u</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bird</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> grep</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">service</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre></div></li></ul><h4 id="q3-å¦‚ä½•é™åˆ¶è·¯ç”±å®£å‘ŠèŒƒå›´" tabindex="-1"><a class="header-anchor" href="#q3-å¦‚ä½•é™åˆ¶è·¯ç”±å®£å‘ŠèŒƒå›´"><span><strong>Q3ï¼šå¦‚ä½•é™åˆ¶è·¯ç”±å®£å‘ŠèŒƒå›´ï¼Ÿ</strong></span></a></h4><p>ä½¿ç”¨ <code>exportFilter</code> è¿‡æ»¤è·¯ç”±ï¼š</p><div class="language-yaml" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">apiVersion</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> projectcalico.org/v3</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">kind</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> BGPConfiguration</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">spec</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  nodeToNodeMeshEnabled</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  serviceClusterIPs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> cidr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10.96.0.0/16</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  exportFilter</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> action</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Deny</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      matchExpression</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">!has(10.244.0.0/16)</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # åªå…è®¸ 10.244.0.0/16 çš„è·¯ç”±</span></span></code></pre></div></div><!----><!--[--><h2 id="doc-changelog" tabindex="-1"><a href="#doc-changelog" class="header-anchor"><span>æ›´æ–°æ—¥å¿—</span></a></h2><div class="vp-changelog-wrapper"><div class="vp-changelog-header"><div class="vp-latest-updated"><span class="vp-changelog-icon"></span><span data-allow-mismatch>2025/8/13 15:11</span></div><div><span class="vp-changelog-menu-icon"></span><span>æŸ¥çœ‹æ‰€æœ‰æ›´æ–°æ—¥å¿—</span></div></div><ul class="vp-changelog-list"><!--[--><li class="vp-changelog-item-commit"><span class="vp-changelog-hash" target="_blank" rel="noreferrer"><code>b14e6</code></span><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">add calico</span><span class="vp-changelog-date" data-allow-mismatch>äº <time datetime="2025-08-13T15:11:46.000Z">2025/8/13</time></span></li><li class="vp-changelog-item-commit"><span class="vp-changelog-hash" target="_blank" rel="noreferrer"><code>6a272</code></span><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">add calico</span><span class="vp-changelog-date" data-allow-mismatch>äº <time datetime="2025-08-13T13:44:30.000Z">2025/8/13</time></span></li><!--]--></ul></div><!--]--><!----></div></main><footer class="vp-doc-footer" data-v-23f6ad98 data-v-fda6bbae><!--[--><!--]--><!----><div class="contributors" aria-label="Contributors" data-v-fda6bbae><span class="contributors-label" data-v-fda6bbae>è´¡çŒ®è€…: </span><span class="contributors-info" data-v-fda6bbae><!--[--><!--[--><span class="contributor" data-v-fda6bbae>zhihao</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-fda6bbae><div class="pager" data-v-fda6bbae><a class="vp-link link pager-link prev" href="/k8s/ayl6l9u6/" data-v-fda6bbae><!--[--><span class="desc" data-v-fda6bbae>ä¸Šä¸€é¡µ</span><span class="title" data-v-fda6bbae>ğŸ±Calicoæ¶æ„å’Œä½¿ç”¨</span><!--]--><!----></a></div><div class="pager" data-v-fda6bbae><a class="vp-link link pager-link next" href="/k8s/5ueb9pny/" data-v-fda6bbae><!--[--><span class="desc" data-v-fda6bbae>ä¸‹ä¸€é¡µ</span><span class="title" data-v-fda6bbae>ip poolçš„ä½¿ç”¨</span><!--]--><!----></a></div></nav></footer><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;" data-v-23f6ad98><div style="display: flex;align-items: center;justify-content: center;height: 96px"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);--icon-size: 48px;display: inline-block;width: var(--icon-size);height: var(--icon-size);background-color: currentcolor;-webkit-mask-image: var(--loading-icon);mask-image: var(--loading-icon)"></span></div></div><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-d90a7a26 data-v-bcf8d9a6><span class="percent" data-allow-mismatch data-v-bcf8d9a6>0%</span><span class="show icon vpi-back-to-top" data-v-bcf8d9a6></span><svg aria-hidden="true" data-v-bcf8d9a6><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-bcf8d9a6></circle></svg></button><footer class="vp-footer has-sidebar" vp-footer data-v-d90a7a26 data-v-400675cf><!--[--><div class="container" data-v-400675cf><!----><p class="copyright" data-v-400675cf>to take the days count</p></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/assets/app-Bx6_S8_t.js" defer></script></body></html>