import{_ as i,c as a,e as n,o as e}from"./app-Bx6_S8_t.js";const h={};function l(t,s){return e(),a("div",null,s[0]||(s[0]=[n(`<p>Calico å¯ä»¥é€šè¿‡ BGP (Border Gateway Protocol) å®£å‘Š Kubernetes Service çš„ ClusterIP å’Œ ExternalIP åˆ°å¤–éƒ¨ç½‘ç»œã€‚ä»¥ä¸‹æ˜¯é…ç½®æ­¥éª¤å’Œç¤ºä¾‹ï¼š</p><h2 id="åŸºæœ¬æ“ä½œæ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ“ä½œæ­¥éª¤"><span>åŸºæœ¬æ“ä½œæ­¥éª¤</span></a></h2><h3 id="_1-å¯ç”¨-service-è·¯ç”±å®£å‘Š" tabindex="-1"><a class="header-anchor" href="#_1-å¯ç”¨-service-è·¯ç”±å®£å‘Š"><span>1. å¯ç”¨ Service è·¯ç”±å®£å‘Š</span></a></h3><ol><li><strong>ä¿®æ”¹ Calico çš„ BGPConfiguration</strong>ï¼š</li></ol><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> edit</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bgpconfiguration</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> default</span></span></code></pre></div><p>æ·»åŠ æˆ–ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š</p><div class="language-yaml" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">apiVersion</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> projectcalico.org/v3</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">kind</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> BGPConfiguration</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">metadata</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> default</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">spec</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  logSeverityScreen</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Info</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  nodeToNodeMeshEnabled</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  serviceClusterIPs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> cidr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10.96.0.0/12</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # æ›¿æ¢ä¸ºä½ çš„ ClusterIP CIDR</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  serviceExternalIPs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> cidr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 192.168.1.0/24</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # æ›¿æ¢ä¸ºä½ çš„ ExternalIP èŒƒå›´</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  asNumber</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 64512</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # ä½ çš„ AS å·</span></span></code></pre></div><h3 id="_2-é…ç½®-bgp-å¯¹ç­‰ä½“-å¦‚æœéœ€è¦ä¸å¤–éƒ¨è·¯ç”±å™¨é€šä¿¡" tabindex="-1"><a class="header-anchor" href="#_2-é…ç½®-bgp-å¯¹ç­‰ä½“-å¦‚æœéœ€è¦ä¸å¤–éƒ¨è·¯ç”±å™¨é€šä¿¡"><span>2. é…ç½® BGP å¯¹ç­‰ä½“ï¼ˆå¦‚æœéœ€è¦ä¸å¤–éƒ¨è·¯ç”±å™¨é€šä¿¡ï¼‰</span></a></h3><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apply</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -f</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;&lt;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">EOF</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">apiVersion: projectcalico.org/v3</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">kind: BGPPeer</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">metadata:</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  name: my-external-router</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">spec:</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  peerIP: 192.168.1.1  # å¤–éƒ¨è·¯ç”±å™¨ IP</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  asNumber: 64513  # å¤–éƒ¨è·¯ç”±å™¨çš„ AS å·</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">EOF</span></span></code></pre></div><h3 id="_3-éªŒè¯é…ç½®" tabindex="-1"><a class="header-anchor" href="#_3-éªŒè¯é…ç½®"><span>3. éªŒè¯é…ç½®</span></a></h3><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># æ£€æŸ¥ BGP å¯¹ç­‰ä½“çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">calicoctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bgppeer</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># æ£€æŸ¥èŠ‚ç‚¹ BGP çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">calicoctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> node</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> status</span></span></code></pre></div><h2 id="å®Œæ•´ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#å®Œæ•´ç¤ºä¾‹"><span>å®Œæ•´ç¤ºä¾‹</span></a></h2><h3 id="åœºæ™¯-å°†ç‰¹å®š-service-çš„-externalip-å®£å‘Šåˆ°å¤–éƒ¨ç½‘ç»œ" tabindex="-1"><a class="header-anchor" href="#åœºæ™¯-å°†ç‰¹å®š-service-çš„-externalip-å®£å‘Šåˆ°å¤–éƒ¨ç½‘ç»œ"><span>åœºæ™¯ï¼šå°†ç‰¹å®š Service çš„ ExternalIP å®£å‘Šåˆ°å¤–éƒ¨ç½‘ç»œ</span></a></h3><ol><li><strong>åˆ›å»ºæµ‹è¯• Service</strong>ï¼š</li></ol><div class="language-yaml" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">apiVersion</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> v1</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">kind</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Service</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">metadata</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my-service</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">spec</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  selector</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    app</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my-app</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  ports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> protocol</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> TCP</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      port</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 80</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      targetPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 9376</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  externalIPs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    -</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 192.168.1.100</span></span></code></pre></div><ol start="2"><li><strong>é…ç½® Calico å®£å‘Š ExternalIP</strong>ï¼š</li></ol><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apply</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -f</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;&lt;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">EOF</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">apiVersion: projectcalico.org/v3</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">kind: BGPConfiguration</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">metadata:</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  name: default</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">spec:</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  serviceExternalIPs:</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  - cidr: 192.168.1.0/24</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">EOF</span></span></code></pre></div><ol start="3"><li><strong>åœ¨å¤–éƒ¨è·¯ç”±å™¨ä¸ŠéªŒè¯</strong>ï¼š</li></ol><div class="language-" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>show ip route 192.168.1.100</span></span></code></pre></div><p>åº”è¯¥èƒ½çœ‹åˆ°æ¥è‡ª Calico èŠ‚ç‚¹çš„ BGP è·¯ç”±ã€‚</p><h2 id="é«˜çº§é…ç½®" tabindex="-1"><a class="header-anchor" href="#é«˜çº§é…ç½®"><span>é«˜çº§é…ç½®</span></a></h2><h3 id="åŸºäºæ³¨è§£çš„ç²¾ç»†æ§åˆ¶" tabindex="-1"><a class="header-anchor" href="#åŸºäºæ³¨è§£çš„ç²¾ç»†æ§åˆ¶"><span>åŸºäºæ³¨è§£çš„ç²¾ç»†æ§åˆ¶</span></a></h3><p>å¯ä»¥ä¸ºç‰¹å®š Service æ·»åŠ æ³¨è§£æ¥æ§åˆ¶è·¯ç”±å®£å‘Šï¼š</p><div class="language-yaml" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">apiVersion</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> v1</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">kind</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Service</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">metadata</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my-service</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  annotations</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    projectcalico.org/exportBgpServiceRoutes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # æ˜¾å¼å¯ç”¨</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # projectcalico.org/exportBgpServiceRoutes: &quot;false&quot;  # æ˜¾å¼ç¦ç”¨</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">spec</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # ...</span></span></code></pre></div><h3 id="ä½¿ç”¨-calico-çš„-serviceadvertisement-èµ„æº-calico-v3-22" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-calico-çš„-serviceadvertisement-èµ„æº-calico-v3-22"><span>ä½¿ç”¨ Calico çš„ ServiceAdvertisement èµ„æºï¼ˆCalico v3.22+ï¼‰</span></a></h3><div class="language-yaml" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">apiVersion</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> projectcalico.org/v3</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">kind</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ServiceAdvertisement</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">metadata</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> advertise-my-service</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">spec</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  services</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">my-service</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  aggregation</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /32</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  communities</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">64512:100</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span></code></pre></div><h2 id="æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„äº‹é¡¹"><span>æ³¨æ„äº‹é¡¹</span></a></h2><ol><li>ç¡®ä¿ä½ çš„ç½‘ç»œè®¾å¤‡é…ç½®äº†æ­£ç¡®çš„ BGP å¯¹ç­‰ä½“</li><li>å¤§å‹é›†ç¾¤ä¸­å®£å‘Šå¤§é‡ Service å¯èƒ½ä¼šå½±å“ç½‘ç»œæ€§èƒ½</li><li>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å»ºè®®ä½¿ç”¨è·¯ç”±èšåˆå‡å°‘è·¯ç”±è¡¨å¤§å°</li><li>å¯¹äº LoadBalancer ç±»å‹çš„ Serviceï¼ŒCalico ä¹Ÿå¯ä»¥ä¸ MetalLB é›†æˆ</li></ol><h2 id="æ•…éšœæ’æŸ¥" tabindex="-1"><a class="header-anchor" href="#æ•…éšœæ’æŸ¥"><span>æ•…éšœæ’æŸ¥</span></a></h2><ol><li><p><strong>æ£€æŸ¥ BGP ä¼šè¯çŠ¶æ€</strong>ï¼š</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">calicoctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> node</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> status</span></span></code></pre></div></li><li><p><strong>æ£€æŸ¥å®£å‘Šçš„è·¯ç”±</strong>ï¼š</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">calicoctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> serviceadvertisement</span></span></code></pre></div></li><li><p><strong>æŸ¥çœ‹ BIRD é…ç½®</strong>ï¼ˆåœ¨ Calico èŠ‚ç‚¹ä¸Šï¼‰ï¼š</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">birdc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> show</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> protocols</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">birdc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> show</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> route</span></span></code></pre></div></li></ol><p>ä»¥ä¸Šé…ç½®å¯ä»¥å¸®åŠ©ä½ å°† Kubernetes Service çš„ IP åœ°å€é€šè¿‡ BGP å®£å‘Šåˆ°å¤–éƒ¨ç½‘ç»œï¼Œå®ç°æ›´çµæ´»çš„ç½‘ç»œé›†æˆã€‚</p>`,31)]))}const p=i(h,[["render",l]]),r=JSON.parse('{"path":"/k8s/yg88mc7r/","title":"ğŸ§€Serviceè·¯ç”±å®£å‘Š","lang":"zh-CN","frontmatter":{"title":"ğŸ§€Serviceè·¯ç”±å®£å‘Š","createTime":"2025/08/18 16:48:36","permalink":"/k8s/yg88mc7r/","description":"Calico å¯ä»¥é€šè¿‡ BGP (Border Gateway Protocol) å®£å‘Š Kubernetes Service çš„ ClusterIP å’Œ ExternalIP åˆ°å¤–éƒ¨ç½‘ç»œã€‚ä»¥ä¸‹æ˜¯é…ç½®æ­¥éª¤å’Œç¤ºä¾‹ï¼š åŸºæœ¬æ“ä½œæ­¥éª¤ 1. å¯ç”¨ Service è·¯ç”±å®£å‘Š ä¿®æ”¹ Calico çš„ BGPConfigurationï¼š æ·»åŠ æˆ–ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š 2. ...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"ğŸ§€Serviceè·¯ç”±å®£å‘Š\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-08-18T08:50:01.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://blog.jianzhihao.icu/k8s/yg88mc7r/"}],["meta",{"property":"og:site_name","content":"ZH Blog"}],["meta",{"property":"og:title","content":"ğŸ§€Serviceè·¯ç”±å®£å‘Š"}],["meta",{"property":"og:description","content":"Calico å¯ä»¥é€šè¿‡ BGP (Border Gateway Protocol) å®£å‘Š Kubernetes Service çš„ ClusterIP å’Œ ExternalIP åˆ°å¤–éƒ¨ç½‘ç»œã€‚ä»¥ä¸‹æ˜¯é…ç½®æ­¥éª¤å’Œç¤ºä¾‹ï¼š åŸºæœ¬æ“ä½œæ­¥éª¤ 1. å¯ç”¨ Service è·¯ç”±å®£å‘Š ä¿®æ”¹ Calico çš„ BGPConfigurationï¼š æ·»åŠ æˆ–ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š 2. ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-08-18T08:50:01.000Z"}],["meta",{"property":"article:modified_time","content":"2025-08-18T08:50:01.000Z"}]]},"readingTime":{"minutes":1.85,"words":555},"git":{"createdTime":1755507001000,"updatedTime":1755507001000,"contributors":[{"name":"Jian Zhihao","username":"","email":"zhihao.kan17@gmail.com","commits":1,"avatar":"https://gravatar.com/avatar/e1544e07aafff26d45ab40aff0c37757b708b7bab4afcdb1fc4b1ffcb6b9edc1?d=retro"}],"changelog":[{"hash":"fb1f08a1f5fd1575147c69ae8762f2870e0bdb45","time":1755507001000,"email":"zhihao.kan17@gmail.com","author":"Jian Zhihao","message":"add service bgp"}]},"autoDesc":true,"filePathRelative":"notes/k8s/2. ç½‘ç»œ/Calico/Serviceè·¯ç”±å®£å‘Š.md","headers":[]}');export{p as comp,r as data};
